---
// Chat Wrapper - Astro component for the Chat Interface
---

<div id="chat-wrapper" class="h-full">
  <div id="chat-container" class="h-full"></div>
</div>

<script>
  import { ChatInterface } from './chat-interface';
  import React from 'react';
  import { createRoot } from 'react-dom/client';

  // Initialize chat interface when DOM is ready
  function initializeChatInterface() {
    const container = document.getElementById('chat-container');
    if (container && !container.hasChildNodes()) {
      const root = createRoot(container);
      root.render(React.createElement(ChatInterface, { 
        className: 'h-full' 
      }));
    }
  }

  // Initialize immediately if DOM is ready, otherwise wait
  if (document.readyState === 'loading') {
    document.addEventListener('DOMContentLoaded', initializeChatInterface);
  } else {
    initializeChatInterface();
  }

  // Export function for external use
  (window as any).initializeChatInterface = initializeChatInterface;
</script>

<style>
  #chat-wrapper {
    height: 100%;
    overflow: hidden;
  }
  
  #chat-container {
    height: 100%;
  }
</style>
